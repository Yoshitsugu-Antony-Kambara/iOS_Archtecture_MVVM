# iOS_Archtecture_MVVM
### MVVMとは

GUI構造をModel/View/ViewModelの三つに分ける

- **View:** 画面の描画処理
- **ViewModel:** 画面描画のロジック
- **Model:**a

# 特徴

**View**と**ViewModel**を**データバインディング**と呼ばれる仕組みで関連づけることで、**ViewModel**の状態変更に同期して**View**の状態も更新され、画面に反映されることが特徴

**→つまり、宣言的なバインディングによってViewModel自身の状態を更新するだけで、Viewの描画処理が発火する。**

### データバインディングとは

- 2つのデータの状態を監視し同期する仕組み。
- 片方のデータ変更をもう一方が検知して、データを自動的に更新する。
- バインディングの関係は一方向だけでなく、双方向の変化を互いに監視することもある。
- ※今回は、ViewがViewModelを監視する、単方向バインディングについて学ぶ。

# MVVMの目的

- 関数型リアクティブプログラミング(**FRP**)との相性が良いから。
    - Modelの変更やViewの変更が相互接続されてリアクティブに反応し合える点で相性が良い。
    - 手続き的ではなく、宣言的にロジックを表現できる点で相性が良い。
    

# MVVMの構造

![IMG_13E919640138-1.jpeg](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/66ddd2ae-66c5-46d3-8893-6ce16410e9fd/IMG_13E919640138-1.jpeg)

## Model

UIに関係しない純粋なドメインロジクやそのデータを持つ。

アプリのビジネスロジックは知っているが、それが画面上でどのように表示されるかを知らない。

**Modelが扱う領域の具体例**

- WebAPI
- データベースへのアクセス
- BLEデバイス制御
- 会員ステータスごとの商品の割引率の計算
- etc...

## View

ユーザ捜査の受付と、画面表示を担当するコンポーネント。

ViewModelが保持する状態とデータバインディングして、ユーザ入力に応じてViewModelが自身が保持するデータを加工・更新することで、バインディングした画面表示を更新する。

## ViewModel

View-Model間の画面表示のための仲介役。

ビジネスロジックと独立した、画面表示のために必要な状態とロジックを担う。

**ViewModelの責務**

- Viewに表示するためのデータを保持
- Viewからイベントを受け取り、Modelの処理を呼び出す
- Viewからイベントを受け取り、加工して値を更新する
